<div class="container max-height-600" ngClass.lt-sm="px-0">

  <ng-container *ngIf="pointItemTransactions; else noTransactions">

    <div class="row ">
      <perfect-scrollbar id="point-item-component-scroll" class="scroll-container perfect-scrollbar-dark" [config]="config" [scrollIndicators]="true">
        <ng-container *ngFor="let transaction of pointItemTransactions.slice(0, showLimit); let i = index">
          <div class="row justify-content-center">
            <div  class="col-10 achievlist point-item-container">

              <div class="flex-container" fxLayout="row wrap" fxLayoutAlign="space-between" >
                <div class="flex-container" fxLayout="row wrap" fxFlex="25%" fxLayoutAlign="space-between" >
                <div fxFlex="100%" fxLayoutAlign.lt-sm="center" class="text-left avatar-col">
                  <ng-container *ngIf="!isManager; else managerAvatar">
                    <ng-container *ngIf="userQuery.getUserByUserId(transaction?.sourceUserId); else avatarLoading">
                      <img [src]="userQuery.getUserByUserId(transaction?.sourceUserId)?.avatarResolvedUrl"
                           alt="Avatar"
                           class="img-center img-fluid rounded-circle avatar-img"
                           id="avatar-user">
                    </ng-container>
                  </ng-container>

                  <ng-template #managerAvatar>
                    <ng-container *ngIf="userQuery.getUserByUserId(transaction?.targetUserId); else avatarLoading">
                      <img [src]="userQuery.getUserByUserId(transaction?.targetUserId)?.avatarResolvedUrl"
                           alt="Avatar"
                           class="img-center img-fluid rounded-circle avatar-img"
                           id="avatar-manager">
                    </ng-container>
                  </ng-template>

                  <ng-template #avatarLoading >
                    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
                         alt="Loading..."
                         class="img-center img-fluid rounded-circle"
                         id="avatarPlaceholder">
                  </ng-template>

                </div>

                <div fxFlex="100%" fxHide fxShow.lt-sm fxLayoutAlign.lt-sm="center" class="text-center">
                  <h3 class="point-value-sm font-size-s">{{transaction?.amount}} üçç</h3>
                </div>
                </div>

                <div fxFlex="55%" fxFlex.lt-sm="75%" fxLayoutAlign.lt-sm="center" class="text-left my-auto">

                  <div class="col-12">
                    <div class="form-row">

                      <h5 class="point-content italics">{{pointItemQuery.getPointItemByItemId(transaction?.pointItemId)?.name}}</h5>

                    </div>
                    <div class="form-row">
                      <ng-container *ngIf="!isManager; else managerContent">
                        <h5 class="point-content">- Awarded by <a href="javascript:void(0)" (click)="onUserClick(transaction?.sourceUserId)">{{userQuery.getUserByUserId(transaction?.sourceUserId)?.firstName}} {{userQuery.getUserByUserId(transaction?.sourceUserId)?.lastName}}</a> on {{transaction?.createdAt | date:'shortDate'}}</h5>
                      </ng-container>
                      <ng-template #managerContent>
                        <h5 class="point-content">- Awarded to <a href="javascript:void(0)" (click)="onUserClick(transaction?.targetUserId)">{{userQuery.getUserByUserId(transaction?.targetUserId)?.firstName}} {{userQuery.getUserByUserId(transaction?.targetUserId)?.lastName}}</a> on {{transaction?.createdAt | date:'shortDate'}}</h5>

                      </ng-template>


                    </div>
                  </div>
                </div>
                <div fxFlex="20%" fxShow fxHide.lt-sm fxLayoutAlign.lt-sm="center" class="text-right my-auto">
                  <h3 class="point-value" ngClass.lt-sm="font-size-s">{{transaction?.amount}} üçç</h3>
                </div>
              </div>


            </div>
          </div>

        </ng-container>


      </perfect-scrollbar>
    </div>


    <div class="row justify-content-md-center">
      <div class="col text-center">
        <ng-container *ngIf="pointItemTransactions?.length >= showLimit; else noMore" >
          Displaying {{showLimit}} out of {{pointItemTransactions?.length}} awards. <a href="javascript:void(0)" (click)="showLimit = showLimit + 6" class="pl-2">Show more...</a>
        </ng-container>
        <ng-template #noMore>
          Displaying all {{pointItemTransactions?.length}} awards.
        </ng-template>
      </div>

    </div>

  </ng-container>

  <ng-template #noTransactions>
    <div class="row justify-content-md-center ">
      <div class="col-10 achievlist point-item-container">
        <div class="row">
          No awards yet...
        </div>
      </div>
    </div>
  </ng-template>
</div>

