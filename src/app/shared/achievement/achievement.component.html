<div class="container align-items-center max-height-600">
  <ng-container *ngIf="!inputUser; else otherUser" >
    <ng-container *ngFor="let family of keys; let i = index">
      <div  class="row justify-content-md-center">

        <div class="col-10 text-center" >
          {{family}}<br>
          **********************
        </div>

        <br>

        <ng-container *ngFor="let achievement of achievementQuery.getAchievementFamily(family); let i = index">
          <div class="col-10 achievlist">
            <ng-container *ngIf="(achievement.progressStatus === 'complete')">
              <div  class="row justify-content-md-center">
                <div class="col-2 star-col">
                  <i *ngIf="achievement.level === 1" class="fas fa-star bronze-star" ></i>
                  <i *ngIf="achievement.level === 2" class="fas fa-star silver-star"></i>
                  <i *ngIf="achievement.level === 3" class="fas fa-star gold-star" ></i>
                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-success"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress glow">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': (achievement.progress / achievement.cost) * 100 + '%'}">
                      </div>
                    </div>
                    <div class="progress-value glow text-center">
                      {{achievement.progress}} / {{achievement.cost}}
                      <br>
                      <button type="button" class="btn btn-success glow" (click)="acknowledgeAchievement(achievement)">COMPLETE</button>
                    </div>
                    <div *ngIf="achievement.completedAt" class="text-center" >
                      <div class="font-italic">
                        Achievement completed on {{achievement.completedAt | date:'longDate' }}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-2 award-col">
                  <div *ngFor="let feature of features">
                    <img *ngIf="feature.achievementId === achievement.achievementId" src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="(achievement.progressStatus === 'complete acknowledged')">
              <div  class="row justify-content-md-center">
                <div class="col-2 star-col" >
                  <ng-container *ngIf="achievement.level === 1">
                    <i  class="fas fa-star bronze-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 2">
                    <i  class="fas fa-star silver-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 3">
                    <i  class="fas fa-star gold-star" ></i>
                  </ng-container>

                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-success"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': (achievement.progress / achievement.cost) * 100 + '%'}">
                      </div>
                    </div>
                    <div class="text-center" >
                      {{achievement.progress}} / {{achievement.cost}}
                    </div>
                    <ng-container *ngIf="achievement.completedAt">
                      <div  class="text-center" >
                        <div class="font-italic">
                          Achievement completed on {{achievement.completedAt | date:'longDate' }}
                        </div>
                      </div>
                    </ng-container>

                  </div>
                </div>
                <div class="col-2 award-col" >
                  <ng-container *ngFor="let feature of features">
                    <ng-container *ngIf="feature.achievementId === achievement.achievementId">
                      <img  src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                    </ng-container>

                  </ng-container>
                </div>
              </div>

            </ng-container>

            <ng-container *ngIf="(achievement.progressStatus === 'in progress')">
              <div  class="row justify-content-md-center">

                <div class="col-2 star-col" >
                  <ng-container *ngIf="achievement.level === 1">
                    <i  class="fas fa-star bronze-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 2">
                    <i  class="fas fa-star silver-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 3">
                    <i  class="fas fa-star gold-star" ></i>
                  </ng-container>
                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-primary"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': (achievement.progress / achievement.cost) * 100 + '%'}">
                      </div>
                    </div>
                    <div class="text-center" >
                      {{achievement.progress}} / {{achievement.cost}}
                    </div>
                  </div>
                </div>
                <div class="col-2 award-col" >
                  <ng-container *ngFor="let feature of features">
                    <ng-container *ngIf="feature.achievementId === achievement.achievementId">
                      <img  src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                    </ng-container>

                  </ng-container>
                </div>
              </div>
            </ng-container>


            <ng-container *ngIf="(achievement.progressStatus === 'not started')">
              <div  class="row justify-content-md-center">
                <div class="col-2 star-col" >
                  <ng-container *ngIf="achievement.level === 1">
                    <i  class="fas fa-star bronze-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 2">
                    <i  class="fas fa-star silver-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 3">
                    <i  class="fas fa-star gold-star" ></i>
                  </ng-container>
                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-primary"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': 0 + '%'}">
                      </div>
                    </div>
                    <div class="text-center" >
                      <ng-container *ngIf="achievement.level > 1; else singleLevel1">
                        <div  class="font-italic">
                          Previous achievement level still in progress...
                        </div>
                      </ng-container>

                      <ng-template #singleLevel1>
                        {{achievement.progress}} / {{achievement.cost}}
                      </ng-template>
                    </div>
                  </div>
                </div>
                <div class="col-2 award-col" >
                  <ng-container *ngFor="let feature of features" >
                    <ng-container *ngIf="feature.achievementId === achievement.achievementId">
                      <div matTooltipPosition="above"
                           [matTooltip]="feature.unlockDescription">
                        <img src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                      </div>
                    </ng-container>

                  </ng-container>
                </div>
              </div>
            </ng-container>


            <br>
          </div>
        </ng-container>


      </div>
    </ng-container>

  </ng-container>

  <ng-template #otherUser>
    <ng-container *ngFor="let family of keys; let i = index">
      <div class="row justify-content-md-center">

        <div class="col-10 text-center" >
          {{family}}<br>
          **********************
        </div>

        <br>
        <ng-container *ngFor="let achievement of otherUserAchievementQuery.getAchievementFamily(family, user?.userId); let i = index">
          <div  class="col-10 achievlist">
            <ng-container *ngIf="(achievement.progressStatus === 'complete acknowledged') || (achievement.progressStatus === 'complete')">
              <div  class="row justify-content-md-center">
                <div class="col-2 star-col" >
                  <ng-container *ngIf="achievement.level === 1">
                    <i  class="fas fa-star bronze-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 2">
                    <i  class="fas fa-star silver-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 3">
                    <i  class="fas fa-star gold-star" ></i>
                  </ng-container>
                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-success"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': (achievement.progress / achievement.cost) * 100 + '%'}">
                      </div>
                    </div>
                    <div class="text-center" >
                      {{achievement.progress}} / {{achievement.cost}}
                    </div>
                    <ng-container *ngIf="achievement.completedAt">
                      <div  class="text-center" >
                        <div class="font-italic">
                          Achievement completed on {{achievement.completedAt | date:'longDate' }}
                        </div>
                      </div>
                    </ng-container>

                  </div>
                </div>
                <div class="col-2 award-col" >
                  <ng-container *ngFor="let feature of features">
                    <ng-container *ngIf="feature.achievementId === achievement.achievementId">
                      <img src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                    </ng-container>

                  </ng-container>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="(achievement.progressStatus === 'in progress')">
              <div  class="row justify-content-md-center">

                <div class="col-2 star-col" >
                  <ng-container *ngIf="achievement.level === 1">
                    <i  class="fas fa-star bronze-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 2">
                    <i  class="fas fa-star silver-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 3">
                    <i  class="fas fa-star gold-star" ></i>
                  </ng-container>
                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-primary"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': (achievement.progress / achievement.cost) * 100 + '%'}">
                      </div>
                    </div>
                    <div class="text-center" >
                      {{achievement.progress}} / {{achievement.cost}}
                    </div>
                  </div>
                </div>
                <div class="col-2 award-col" >
                  <ng-container *ngFor="let feature of features">
                    <ng-container *ngIf="feature.achievementId === achievement.achievementId">
                      <img src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                    </ng-container>

                  </ng-container>
                </div>
              </div>
            </ng-container>


            <ng-container *ngIf="(achievement.progressStatus === 'not started')" >
              <div class="row justify-content-md-center">
                <div class="col-2 star-col" >
                  <ng-container *ngIf="achievement.level === 1">
                    <i  class="fas fa-star bronze-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 2">
                    <i  class="fas fa-star silver-star" ></i>
                  </ng-container>
                  <ng-container *ngIf="achievement.level === 3">
                    <i  class="fas fa-star gold-star" ></i>
                  </ng-container>
                </div>
                <div class="col-8">
                  <span >{{achievement.name}}</span><br>
                  <span >{{achievement.description}}</span>
                  <div class="progress-container progress-primary"
                       matTooltipPosition="above"
                       [matTooltip]="achievement.description">

                    <div class="progress">
                      <div class="progress-bar progress-bar-warning"
                           role="progressbar"
                           aria-valuenow="0"
                           aria-valuemin="0"
                           aria-valuemax="100"
                           [ngStyle]="{'width': 0 + '%'}">
                      </div>
                    </div>
                    <div class="text-center" >
                      <ng-container *ngIf="achievement.level > 1; else singleLevel2">
                        <div  class="font-italic">
                          Previous achievement level still in progress...
                        </div>
                      </ng-container>

                      <ng-template #singleLevel2>
                        {{achievement.progress}} / {{achievement.cost}}
                      </ng-template>
                    </div>
                  </div>
                </div>
                <div class="col-2 award-col" >
                  <ng-container *ngFor="let feature of features" >
                    <ng-container *ngIf="feature.achievementId === achievement.achievementId">
                      <div matTooltipPosition="above"
                           [matTooltip]="feature.unlockDescription">
                        <img src="../../../assets/img/Treasure%20Chest-595b40b85ba036ed117dacb5.svg" />
                      </div>
                    </ng-container>


                  </ng-container>
                </div>
              </div>
            </ng-container>


            <br>
          </div>
        </ng-container>

      </div>
    </ng-container>

  </ng-template>

</div>

