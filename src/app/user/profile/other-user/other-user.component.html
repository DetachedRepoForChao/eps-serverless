<div class="wrapper">

  <section class="section section-lg section-coins">
    <img src="../../../assets/img/path3.png" class="path">
    <div class="container align-items-center wrapperwidth">
      <div class="row" >
        <div class="col-lg-12 col-md-6 col-sm-10 ml-auto mr-auto" id="profile">

          <div class="card">
            <div class="card card-coin card-plain card-custom">

              <div class="card-body" >
                <div class="row">
                  <div class="col-4">
                    <div class="row">
                      <div class="col-12">
                        <div *ngIf="this.user$; else avatarLoading">
                          <img [src]="(this.user$ | async)[0]?.avatarResolvedUrl"
                               alt="Avatar"
                               class="img-center img-fluid rounded-circle"
                               id="avatar">
                        </div>

                        <ng-template #avatarLoading >
                          <img src="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
                               alt="Loading..."
                               class="img-center img-fluid rounded-circle"
                               id="avatarPlaceholder">
                        </ng-template>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12 text-center">
                        <div *ngIf="(user$ | async)[0]?.preferredName; else noPreferredName">
                          <h4 class="text-uppercase">{{(user$ | async)[0]?.preferredName}}</h4>
                        </div>
                        <ng-template #noPreferredName>
                          <h4 class="text-uppercase">{{(user$ | async)[0]?.firstName}} {{(user$ | async)[0]?.lastName}}</h4>
                        </ng-template>
                        <span>{{(user$ | async)[0]?.department.Name}}</span>
                      </div>
                    </div>
                    <div *ngIf="user$" class="row text-center">
                      <div class="col p-2">
                        <h3 class="mb-1 line-height-5 font-weight-bold">Points</h3>
                        <h4 class="mb-0">{{(user$ | async)[0]?.points}}</h4>
                      </div>
                      <div class="col p-2">
                        <h3 class="mb-1 line-height-5 font-weight-bold">Trophies</h3>
                        <h4 class="mb-0">{{userQuery.getUserCompleteAchievementCount((user$ | async)[0]?.userId).length}} / {{achievementQuery.getAll().length}}</h4>
                      </div>
                      <div class="col p-2">
                        <h3 class="mb-1 line-height-5 font-weight-bold">Rank</h3>
                        <h4 class="mb-0">{{(leaderboardUsers$ | async).indexOf((user$ | async)[0]) + 1}}</h4>
                      </div>
                    </div>
                    <div class="row core-value-row">
                      <div class="col-12">

                        <div *ngIf="coreValueData && (coreValueData)?.length > 0; else coreValueChartPlaceholder" class="img-center img-fluid">
                          <div class="positionrelative">
                            <div class="row text-center">
                              <h3 class="mb-1 line-height-5 font-weight-bold x-margin-auto">Core Values</h3>
                            </div>
                            <div class="row chart-row" >
                              <google-chart class="x-margin-auto" #chart
                                            [type]="'PieChart'"
                                            [data]="coreValueData"
                                            [columnNames]="myColumnNames"
                                            [options]="options">
                              </google-chart>
                            </div>
                          </div>
                        </div>
                        <ng-template #coreValueChartPlaceholder>
                          <img src="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
                               alt="Loading..."
                               class="img-center img-fluid rounded-circle"
                               id="coreValueChartPlaceholder">
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <div class="col-8">

                    <div class="row attributes-row">
                      <div class="user-form-container col-12">
<!--                        <div class="form-row">
                          <div class="col-5 aligncentercontent">
                            <label class="form-label">Name</label>
                          </div>
                          <div class="col-7">
                            <div *ngIf="(user$ | async)[0]?.preferredName; else noPreferredName">
                              <h4 class="user-attribute">{{(user$ | async)[0]?.preferredName}}</h4>
                            </div>
                            <ng-template #noPreferredName>
                              <h4 class="user-attribute">{{(user$ | async)[0]?.firstName}} {{(user$ | async)[0]?.lastName}}</h4>
                            </ng-template>
                          </div>
                        </div>
                        <div class="form-row">
                          <div class="col-5">
                            <label class="form-label">Department</label>
                          </div>
                          <div class="col-7">
                            <h4 class="user-attribute">{{(user$ | async)[0]?.department.Name}}</h4>
                          </div>
                        </div>-->
                        <div class="form-row">
                          <div class="col-3">
                            <label class="form-label">Email</label>
                          </div>
                          <div class="col-7">
                            <div *ngIf="(user$ | async)[0]?.emailPublic; else fieldPrivate">
                              <h4 class="user-attribute">{{(user$ | async)[0]?.email}}</h4>
                            </div>
                          </div>
                        </div>
                        <div class="form-row">
                          <div class="col-3">
                            <label class="form-label">Phone</label>
                          </div>
                          <div class="col-7">
                            <div *ngIf="(user$ | async)[0]?.phonePublic; else fieldPrivate">
                              <h4 class="user-attribute">{{(user$ | async)[0]?.phone}}</h4>
                            </div>
                          </div>
                        </div>
                        <div class="form-row">
                          <div class="col-3">
                            <label class="form-label">Gender</label>
                          </div>
                          <div class="col-7">
                            <div *ngIf="(user$ | async)[0]?.genderPublic; else fieldPrivate">
                              <h4 *ngIf="(user$ | async)[0]?.gender" class="user-attribute">{{(user$ | async)[0]?.gender}}</h4>
                            </div>
                          </div>
                        </div>
                        <div class="form-row">
                          <div class="col-3">
                            <label class="form-label">Date of Birth</label>
                          </div>
                          <div class="col-7">
                            <div *ngIf="(user$ | async)[0]?.birthdatePublic; else fieldPrivate">
                              <h4 class="user-attribute">{{(user$ | async)[0]?.birthdate}}</h4>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row quote-row">
                      <div class="col-1 quote-box-quotation-mark" >
                        <div>&ldquo;</div>
                      </div>
                      <div class="col-9 quote-box-text">
                        <div *ngIf="(user$ | async)[0]?.quote; else noQuote">
                          <h4 class="user-attribute">{{(user$ | async)[0]?.quote}}</h4>
                        </div>
                        <ng-template #noQuote>
                          <h4 class="user-attribute">Nothing here yet...</h4>
                        </ng-template>

                      </div>
                      <div class="col-2">

                      </div>
                    </div>
                    <div class="form-row y-padding-0 margin-top-10">
                      <div class="col-12">
                        <div class="form-row y-padding-0">
                          <div class="col-8">
                            <label class="form-label">Latest points award...</label>
                          </div>
                          <div class="col-2 y-margin-auto textr">
                            <a href="javascript:void(0)">...view all</a>
                          </div>

                        </div>
                        <div class="form-row y-padding-0 margin-top--10">
                          <div class="col-8">
                            <h5 class="user-attribute italics">Did some stuff? 400 points for Gryffindor! Test Test Test Test Test Test</h5>
                          </div>
                          <div class="col-2 textr">
                            <h5 class="user-attribute">...400pts</h5>
                          </div>
                        </div>
                        <div class="form-row y-padding-0 margin-top--10">
                          <div class="col-12">
                            <h5 class="user-attribute">- Awarded by Max Bado on 03/07/2019</h5>
                          </div>
                        </div>
                      </div>

                    </div>
                    <div class="form-row y-padding-0 margin-top-30">
                      <div class="col-12">
                        <div class="form-row y-padding-0">
                          <div class="col-8">
                            <label class="form-label">Latest completed achievement...</label>
                          </div>
                          <div class="col-2 y-margin-auto textr">
                            <a href="javascript:void(0)">...view all</a>
                          </div>

                        </div>
                        <div class="form-row y-padding-0 margin-top--10">
                          <div class="col-8">
                            <h5 class="user-attribute italics">Took a shower this morning. Yay.</h5>
                          </div>
                          <div class="col-2 y-margin-auto textr">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                          </div>

                        </div>
                        <div class="form-row y-padding-0 margin-top--10">
                          <div class="col-12">
                            <h5 class="user-attribute">- Completed on 03/20/2019</h5>
                          </div>
                        </div>


                      </div>

                    </div>
                  </div>

                </div>


              </div>
              <div class="card-footer text-center">
                <!-----Button----->
                <div class="container">
                  <div class="row">

                  </div>
                </div>
              </div>
            </div>

          </div>







        </div>
      </div>
    </div>
  </section>


</div>

<ng-template #fieldPrivate>
  <h4 class="user-attribute">Private</h4>
</ng-template>
